<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë¶„ì„ ê²°ê³¼ - SkinAI</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-color: #fafafa;
        }

        .result-container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* ì˜ë£Œ ë©´ì±… ê³ ì§€ */
        .disclaimer-banner {
            background-color: #fff9e6;
            border: 1px solid #ffd966;
            border-radius: 8px;
            padding: 16px 24px;
            margin-bottom: 30px;
        }

        .disclaimer-text {
            font-size: 14px;
            color: #666;
        }

        .disclaimer-text strong {
            color: #333;
            font-weight: 600;
        }

        /* OOD ê²½ê³  ë°°ë„ˆ */
        .ood-warning-banner {
            background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%);
            border: 3px solid #ffc107;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 30px;
            box-shadow: 0 8px 24px rgba(255, 152, 0, 0.25);
            text-align: center;
        }

        .ood-warning-content {
            max-width: 600px;
            margin: 0 auto;
        }

        /* ë©”ì¸ ë ˆì´ì•„ì›ƒ */
        .result-main {
            display: grid;
            grid-template-columns: 450px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* ì™¼ìª½: ë¶„ì„ ëŒ€ìƒ ì´ë¯¸ì§€ */
        .result-image-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-badge {
            padding: 6px 14px;
            background-color: #333;
            color: white;
            font-size: 12px;
            font-weight: 600;
            border-radius: 20px;
        }

        .result-image-container {
            position: relative;
            width: 100%;
            aspect-ratio: 3/4;
            border-radius: 8px;
            overflow: hidden;
            background: #f5f5f5;
        }

        .result-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ì˜¤ë¥¸ìª½: ìµœê·¼ ì§„ë‹¨ ì˜ˆì¸¡ */
        .result-prediction-section {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .prediction-header {
            margin-bottom: 32px;
        }

        .prediction-title {
            font-size: 24px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 12px;
        }

        .prediction-subtitle {
            font-size: 14px;
            color: #666;
        }

        .diagnosis-result {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .diagnosis-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }

        .diagnosis-value {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
        }

        .diagnosis-bar {
            margin-bottom: 20px;
        }

        .bar-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .bar-label {
            font-size: 14px;
            color: #666;
        }

        .bar-value {
            font-size: 16px;
            font-weight: 700;
            color: #f4b400;
        }

        .bar-track {
            height: 12px;
            background: #f0f0f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #f4b400, #ffeb3b);
            border-radius: 6px;
            transition: width 1s ease;
        }

        /* ìƒìœ„ ì˜ˆì¸¡ ê²°ê³¼ */
        .top-predictions {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }

        .predictions-list {
            display: grid;
            gap: 20px;
        }

        .prediction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .prediction-item:last-child {
            border-bottom: none;
        }

        .prediction-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .prediction-score {
            font-size: 18px;
            font-weight: 700;
            color: #f4b400;
        }

        /* ì¶”ì²œ ì‚¬í•­ ì¹´ë“œ */
        .recommendations-section {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 30px;
        }

        .recommendations-header {
            margin-bottom: 24px;
        }

        .recommendations-title {
            font-size: 20px;
            font-weight: 700;
            color: #1a1a1a;
        }

        .recommendations-list {
            display: grid;
            gap: 16px;
        }

        .recommendation-item {
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #f9fafb 100%);
            border-radius: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .recommendation-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .recommendation-text {
            font-size: 15px;
            line-height: 1.6;
            color: #444;
        }

        .no-recommendations {
            text-align: center;
            padding: 40px 20px;
            color: #999;
            font-size: 14px;
        }

        /* ë²„íŠ¼ */
        .result-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 40px;
        }

        .btn {
            padding: 14px 32px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #333;
            color: white;
        }

        .btn-primary:hover {
            background: #000;
        }

        .btn-secondary {
            background: white;
            color: #333;
            border: 2px solid #ddd;
        }

        .btn-secondary:hover {
            border-color: #333;
        }

        @media (max-width: 1024px) {
            .result-main {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ì „ì—­ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="global-nav">
        <div class="global-nav-container">
            <a href="index.html" class="nav-brand" style="text-decoration: none;">
                <div class="nav-brand-icon">S</div>
                <div class="nav-brand-text">
                    <h1>SkinAI</h1>
                    <p>í”¼ë¶€ ê±´ê°• ê´€ë¦¬ í”Œë«í¼</p>
                </div>
            </a>
            <ul class="nav-menu">
                <li><a href="index.html">í™ˆ</a></li>
                <li><a href="signup.html">íšŒì›ê°€ì…</a></li>
                <li><a href="ai-analysis.html">SKINAI</a></li>
                <li><a href="my-analyses.html">My skin</a></li>
                <li><a href="board.html">ì»¤ë®¤ë‹ˆí‹°</a></li>
            </ul>
            <div class="nav-user" id="nav-user-section">
                <span class="nav-user-name" id="nav-user-name"></span>
                <div class="nav-user-icon" id="nav-user-icon">ğŸ‘¤</div>
            </div>
        </div>
    </nav>

    <div class="result-container">
        <div id="message-box" class="message" style="display: none;"></div>

        <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
        <div class="result-main">
            <!-- ì™¼ìª½: ë¶„ì„ ëŒ€ìƒ ì´ë¯¸ì§€ -->
            <div class="result-image-section">
                <div class="section-header">
                    <h3 class="section-title">ë¶„ì„ ëŒ€ìƒ ì´ë¯¸ì§€</h3>
                    <span class="status-badge">ë¶„ì„ ì™„ë£Œ</span>
                </div>
                <div class="result-image-container">
                    <img id="result-image" class="result-image" alt="ë¶„ì„ ì´ë¯¸ì§€">
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ìµœê·¼ ì§„ë‹¨ ì˜ˆì¸¡ -->
            <div class="result-prediction-section">
                <div class="prediction-header">
                    <h2 class="prediction-title">NEW SKINAI</h2>
                </div>

                <div class="diagnosis-result">
                    <div class="diagnosis-label">SKINAIì˜ ì˜ˆì¸¡ ê²°ê³¼</div>
                    <div class="diagnosis-value" id="diagnosis-name">ì§„ë‹¨ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

                    <div class="diagnosis-bar">
                        <div class="bar-header">
                            <span class="bar-label">ì˜ˆì¸¡ í™•ë¥ :</span>
                            <span class="bar-value" id="confidence-value">0%</span>
                        </div>
                        <div class="bar-track">
                            <div class="bar-fill" id="confidence-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- ì§ˆí™˜ë³„ ì¶”ì²œ ì‚¬í•­ -->
                <div class="recommendations-section" id="recommendations-section" style="display: none;">
                    <div class="recommendations-header">
                        <h3 class="recommendations-title">í”¼ë¶€ ê´€ë¦¬ ì¶”ì²œ ì‚¬í•­</h3>
                    </div>
                    <div class="recommendations-list" id="recommendations-list">
                        <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒìœ„ ì˜ˆì¸¡ ê²°ê³¼ (Top 5) -->
        <div class="top-predictions">
            <h3 class="section-title">ìƒìœ„ ì˜ˆì¸¡ ê²°ê³¼ (Top 5)</h3>
            <div class="predictions-list" id="predictions-list">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
        </div>

        <!-- ì˜ë£Œ ë©´ì±… ê³ ì§€ -->
        <div class="disclaimer-banner">
            <div class="disclaimer-text">
                <strong>ì˜ë£Œ ë©´ì±… ê³ ì§€:</strong>
                ì´ ë¶„ì„ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, ì •í™•í•œ ì§„ë‹¨ê³¼ ì¹˜ë£ŒëŠ” ë°˜ë“œì‹œ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
            </div>
        </div>

        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
        <div class="result-actions">
            <button class="btn btn-primary" id="new-analysis-btn">ìƒˆë¡œìš´ ë¶„ì„í•˜ê¸°</button>
            <button class="btn btn-secondary" id="my-analyses-btn">ë‚´ ë¶„ì„ ê¸°ë¡</button>
            <button class="btn btn-secondary" onclick="window.location.href='board.html'">ì»¤ë®¤ë‹ˆí‹° ê°€ê¸°</button>
        </div>
    </div>

    <script src="common-nav.js"></script>
    <script>
        // ë„¤ë¹„ê²Œì´ì…˜ ì´ˆê¸°í™”
        initializeNavigation('ai-result.html');

        // URLì—ì„œ ë¶„ì„ ID ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const analysisId = urlParams.get('id');

        if (!analysisId) {
            document.getElementById('diagnosis-name').textContent = 'ë¶„ì„ IDê°€ ì—†ìŠµë‹ˆë‹¤.';
        } else {
            loadAnalysisResult(analysisId);
        }

        // ë¶„ì„ ê²°ê³¼ ë¡œë“œ
        async function loadAnalysisResult(id) {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch(`/api/ai/analysis/${id}`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                const result = await response.json();

                if (result.success) {
                    const analysis = result.data;
                    displayAnalysisResult(analysis);
                } else {
                    document.getElementById('diagnosis-name').textContent = 'ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                }
            } catch (error) {
                console.error('ë¶„ì„ ê²°ê³¼ ë¡œë”© ì—ëŸ¬:', error);
                document.getElementById('diagnosis-name').textContent = 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            }
        }

        // ë¶„ì„ ê²°ê³¼ í‘œì‹œ
        function displayAnalysisResult(analysis) {
            console.log('[DEBUG] ë¶„ì„ ê²°ê³¼:', analysis);

            // ì´ë¯¸ì§€ í‘œì‹œ
            const imageFilename = analysis.imageFilename || analysis.surveyId?.imageFilename;
            if (imageFilename) {
                document.getElementById('result-image').src = `/uploads/${imageFilename}`;
            }

            // AI ì˜ˆì¸¡ ê²°ê³¼ ì‚¬ìš© (ìš°ì„ ìˆœìœ„: AI predictions > skinType)
            let topDisease = 'ë¶„ì„ ê²°ê³¼ ì—†ìŒ';
            let topConfidence = 0;

            if (analysis.predictions && analysis.predictions.length > 0) {
                // AI ì˜ˆì¸¡ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš° - í•œêµ­ì–´ ìš°ì„  í‘œì‹œ
                const firstPred = analysis.predictions[0];
                topDisease = firstPred.disease_ko || firstPred.disease || analysis.topDisease;

                // ì‹¤ì œ ì‹ ë¢°ë„ ê·¸ëŒ€ë¡œ í‘œì‹œ (ì¸ìœ„ì  ìƒí–¥ ì œê±°)
                const actualConfidence = (firstPred.confidence || analysis.overallConfidence || 0) * 100;
                topConfidence = Math.round(actualConfidence);
            } else if (analysis.topDisease) {
                // AI ì˜ˆì¸¡ ê²°ê³¼ë§Œ ìˆëŠ” ê²½ìš°
                topDisease = analysis.topDisease;
                const actualConfidence = (analysis.overallConfidence || 0) * 100;
                topConfidence = Math.round(actualConfidence);
            } else if (analysis.skinType) {
                // ì„¤ë¬¸ ê¸°ë°˜ ê²°ê³¼ë§Œ ìˆëŠ” ê²½ìš° (Fallback)
                topDisease = `${analysis.skinType} í”¼ë¶€ (ì„¤ë¬¸ ê¸°ë°˜)`;
                topConfidence = analysis.score || 70;
            }

            // ì§„ë‹¨ëª… í‘œì‹œ
            document.getElementById('diagnosis-name').textContent = topDisease;

            // ì‹ ë¢°ë„ í‘œì‹œ
            document.getElementById('confidence-value').textContent = `${topConfidence}%`;
            document.getElementById('confidence-bar').style.width = `${topConfidence}%`;

            // Top 5 ì˜ˆì¸¡ ê²°ê³¼ í‘œì‹œ (ì‹¤ì œ AI ë°ì´í„° ì‚¬ìš©)
            const predictionsList = document.getElementById('predictions-list');

            if (analysis.predictions && analysis.predictions.length > 0) {
                // AI ì˜ˆì¸¡ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš°
                const top5 = analysis.predictions.slice(0, 5);

                predictionsList.innerHTML = top5.map((pred, index) => {
                    // ì‹¤ì œ ì‹ ë¢°ë„ë¥¼ ê·¸ëŒ€ë¡œ í‘œì‹œ (ìŠ¤ì¼€ì¼ë§ ì œê±°)
                    const actualConfidence = (pred.confidence || 0) * 100;
                    const displayConfidence = Math.round(actualConfidence);

                    // í•œêµ­ì–´ ìš°ì„  í‘œì‹œ: "í•œêµ­ì–´ (English)"
                    const koreanName = pred.disease_ko || pred.disease;
                    const englishName = pred.disease;
                    const displayName = pred.disease_ko
                        ? `${koreanName} (${englishName})`
                        : englishName;

                    return `
                        <div class="prediction-item">
                            <span class="prediction-name">${index + 1}. ${displayName}</span>
                            <span class="prediction-score">${displayConfidence}%</span>
                        </div>
                    `;
                }).join('');
            } else {
                // Fallback: ì„¤ë¬¸ ê¸°ë°˜ ê²°ê³¼
                predictionsList.innerHTML = `
                    <div class="prediction-item" style="background: #fff9e6; padding: 20px; border-radius: 8px;">
                        <p style="margin: 0; color: #666; font-size: 14px;">
                            ì„¤ë¬¸ ê¸°ë°˜ ë¶„ì„ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.<br>
                            ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•´ í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                `;
            }

            // ì„¤ë¬¸ ë°ì´í„° ë° ì¶”ì²œ ì‚¬í•­ í‘œì‹œ (ì„ íƒì )
            displayAdditionalInfo(analysis);
        }

        // ì¶”ê°€ ì •ë³´ í‘œì‹œ (ì„¤ë¬¸ ë°ì´í„°, ì¶”ì²œ ì‚¬í•­)
        function displayAdditionalInfo(analysis) {
            // ì¶”ì²œ ì‚¬í•­ í‘œì‹œ
            if (analysis.predictions && analysis.predictions.length > 0) {
                const topPrediction = analysis.predictions[0];
                displayRecommendations(topPrediction.disease, topPrediction.disease_ko);
            } else if (analysis.recommendations && analysis.recommendations.length > 0) {
                // ì„œë²„ì—ì„œ ì¶”ì²œ ì‚¬í•­ì´ ì§ì ‘ ì œê³µëœ ê²½ìš°
                displayRecommendationsFromServer(analysis.recommendations);
            }

            // ë””ë²„ê·¸ ë¡œê¹…
            if (analysis.summary || analysis.aiSummary) {
                console.log('[INFO] ìš”ì•½:', analysis.summary || analysis.aiSummary);
            }

            if (analysis.skinType || analysis.concerns) {
                console.log('[INFO] ì„¤ë¬¸ ë°ì´í„° - í”¼ë¶€ íƒ€ì…:', analysis.skinType, 'ê³ ë¯¼:', analysis.concerns);
            }
        }

        // ì§ˆí™˜ë³„ ì¶”ì²œ ì‚¬í•­ í‘œì‹œ
        function displayRecommendations(diseaseName, diseaseNameKo) {
            // ì§ˆí™˜ë³„ ì¶”ì²œ ì‚¬í•­ ë°ì´í„° (config.pyì™€ ë™ê¸°í™”)
            const recommendationsData = {
                "Acne": {
                    items: [
                        "í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤",
                        "ìœ ë¶„ê¸° ì ì€ í™”ì¥í’ˆì„ ì‚¬ìš©í•˜ì„¸ìš”",
                        "ì •ê¸°ì ì¸ í´ë Œì§•ì´ ì¤‘ìš”í•©ë‹ˆë‹¤",
                        "ì†ìœ¼ë¡œ ë§Œì§€ì§€ ë§ˆì„¸ìš”"
                    ]
                },
                "Atopic Dermatitis": {
                    items: [
                        "ë³´ìŠµì œë¥¼ ìì£¼ ë°œë¼ì£¼ì„¸ìš”",
                        "í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ì§„ë£Œê°€ í•„ìš”í•©ë‹ˆë‹¤",
                        "ìê·¹ì ì¸ ì„¸ì œ ì‚¬ìš©ì„ í”¼í•˜ì„¸ìš”",
                        "ê¸ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”"
                    ]
                },
                "Contact Dermatitis": {
                    items: [
                        "ì•Œë ˆë¥´ê¸° ìœ ë°œ ë¬¼ì§ˆì„ íŒŒì•…í•˜ì„¸ìš”",
                        "í”¼ë¶€ê³¼ ì§„ë£Œë¥¼ ë°›ìœ¼ì„¸ìš”",
                        "í•´ë‹¹ ë¬¼ì§ˆê³¼ì˜ ì ‘ì´‰ì„ í”¼í•˜ì„¸ìš”",
                        "ìŠ¤í…Œë¡œì´ë“œ ì—°ê³ ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
                    ]
                },
                "Eczema": {
                    items: [
                        "í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤",
                        "ë³´ìŠµì œë¥¼ ì •ê¸°ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì„¸ìš”",
                        "ìê·¹ì ì¸ ë¹„ëˆ„ë‚˜ ì„¸ì œë¥¼ í”¼í•˜ì„¸ìš”",
                        "ê¸ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”"
                    ]
                },
                "Psoriasis": {
                    items: [
                        "í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ì§„ë£Œê°€ í•„ìˆ˜ì…ë‹ˆë‹¤",
                        "ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤",
                        "ë³´ìŠµì„ ì² ì €íˆ í•˜ì„¸ìš”",
                        "ìì™¸ì„  ì¹˜ë£Œê°€ ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
                    ]
                },
                "Urticaria": {
                    items: [
                        "í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤",
                        "ì›ì¸ ë¬¼ì§ˆì„ ì°¾ì•„ í”¼í•˜ì„¸ìš”",
                        "í•­íˆìŠ¤íƒ€ë¯¼ì œ ë³µìš©ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",
                        "ê¸ì§€ ë§ê³  ëƒ‰ì°œì§ˆì„ í•´ë³´ì„¸ìš”"
                    ]
                },
                "default": {
                    items: [
                        "í”¼ë¶€ê³¼ ì „ë¬¸ì˜ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤",
                        "ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•´ ë³‘ì› ë°©ë¬¸ì´ í•„ìš”í•©ë‹ˆë‹¤",
                        "ìì™¸ì„  ì°¨ë‹¨ì œë¥¼ ë§¤ì¼ ì‚¬ìš©í•˜ì„¸ìš”",
                        "ì¶©ë¶„í•œ ìˆ˜ë¶„ ê³µê¸‰ì„ ìœ ì§€í•˜ì„¸ìš”"
                    ]
                }
            };

            // ì§ˆí™˜ëª…ìœ¼ë¡œ ì¶”ì²œ ì‚¬í•­ ì°¾ê¸°
            const recommendations = recommendationsData[diseaseName] || recommendationsData['default'];

            // UIì— í‘œì‹œ
            const recommendationsSection = document.getElementById('recommendations-section');
            const recommendationsList = document.getElementById('recommendations-list');

            if (recommendations.items && recommendations.items.length > 0) {
                const itemsHtml = recommendations.items.map((item, index) => {
                    return `
                        <div class="recommendation-item">
                            <div class="recommendation-text">${item}</div>
                        </div>
                    `;
                }).join('');

                recommendationsList.innerHTML = itemsHtml;
                recommendationsSection.style.display = 'block';
            }
        }

        // ì„œë²„ì—ì„œ ì§ì ‘ ì œê³µëœ ì¶”ì²œ ì‚¬í•­ í‘œì‹œ
        function displayRecommendationsFromServer(recommendations) {
            const recommendationsSection = document.getElementById('recommendations-section');
            const recommendationsList = document.getElementById('recommendations-list');

            if (recommendations && recommendations.length > 0) {
                const itemsHtml = recommendations.map((item, index) => {
                    return `
                        <div class="recommendation-item">
                            <div class="recommendation-text">${item}</div>
                        </div>
                    `;
                }).join('');

                recommendationsList.innerHTML = itemsHtml;
                recommendationsSection.style.display = 'block';
            }
        }

        // ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById('new-analysis-btn').addEventListener('click', () => {
            window.location.href = 'ai-analysis.html';
        });

        document.getElementById('my-analyses-btn').addEventListener('click', () => {
            window.location.href = 'my-analyses.html';
        });
    </script>
</body>
</html>
